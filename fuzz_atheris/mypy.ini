# Mypy configuration for Atheris fuzzers
# Location: fuzz_atheris/mypy.ini
#
# ============================================================================
# ARCHITECTURAL PHILOSOPHY
# ============================================================================
#
# Fuzzing code prioritizes crash detection and coverage over type safety.
# Atheris (the fuzzing framework) lacks type stubs, so strict typing is
# impractical. This configuration allows fuzzing to run while still catching
# obvious errors.
#
# ============================================================================

[mypy]
# Python version (must match pyproject.toml: requires-python = ">=3.13")
python_version = 3.13

# ============================================================================
# TYPE CHECKING STRICTNESS (relaxed for fuzzing)
# ============================================================================

# Overall strictness: Relaxed
strict = false

# Atheris has no type stubs; FuzzedDataProvider returns Any
warn_return_any = false

# Check types when provided
check_untyped_defs = true

# Prevent None bugs
no_implicit_optional = true

# Fuzzing code may have unreachable match cases (intentional for coverage)
warn_unreachable = false

# ============================================================================
# ANNOTATION REQUIREMENTS (relaxed for fuzzing convenience)
# ============================================================================

# Allow functions without full type annotations
disallow_untyped_defs = false

# Allow generic types without parameters
disallow_any_generics = false

# Allow untyped function calls (Atheris methods)
disallow_untyped_calls = false

# Allow untyped decorators
disallow_untyped_decorators = false

# ============================================================================
# IMPORT HANDLING
# ============================================================================

# Follow imports normally
follow_imports = normal

# Atheris has no type stubs
ignore_missing_imports = true

# ============================================================================
# ERROR REPORTING
# ============================================================================

# Show error codes for easy reference
show_error_codes = true

# Pretty output
pretty = true
color_output = true

# Show summary
error_summary = true

# ============================================================================
# INCREMENTAL CHECKING
# ============================================================================

incremental = true
cache_dir = .mypy_cache
